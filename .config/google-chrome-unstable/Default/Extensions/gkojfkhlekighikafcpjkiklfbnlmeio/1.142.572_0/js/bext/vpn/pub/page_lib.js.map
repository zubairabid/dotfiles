{"version":3,"sources":["page_lib.js"],"names":["Section","Label_line","Legal_section","T","ui_lib","Header","logo_url","cp_url","login_url","upgrade_url","be_vpn_util","plus_ref","logo_cls","props","is_plus","title","user","displayName","Page_layout","cls","children","React","Component","on_click","label","PureComponent","_mts_events","_uninit_mts","_mts_inited","Object","entries","forEach","ev_name","model","fn","off","window","removeEventListener","state","key","key_state","entry","setState","get","on","addEventListener","Array","isArray","_model_to_state","k","Modal","el","document","createElement","classList","add","body","appendChild","removeChild","ReactDOM","createPortal","className","on_close","action"],"mappings":"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","file":"page_lib.js","sourcesContent":["                   \n'use strict';                                              \nimport 'regenerator-runtime';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport classnames from 'classnames';\nimport ui_lib from '/bext/vpn/pub/ui_lib.js';\nimport be_vpn_util from '/bext/vpn/pub/util.js';\n\nconst T = ui_lib.T;\n\nconst Header = props=>{\n    let logo_url = 'https://hola.org?utm_source=holaext&utm_content=settings';\n    let cp_url = 'https://hola.org/cp?utm_source=holaext&utm_content=settings';\n    let login_url =\n        'https://hola.org/signin?utm_source=holaext&utm_content=settings';\n    let upgrade_url = be_vpn_util.plus_ref('ext_settings_upgrade');\n    let logo_cls = 'logo '+(props.is_plus ? 'logo-plus' : 'logo-free');\n    return (\n        <div className=\"header\">\n          <a className={logo_cls} target=\"_blank\" rel=\"noopener noreferrer\"\n            href={logo_url}/>\n          <div className=\"title\">{props.title}</div>\n          {!props.is_plus &&\n          <div className=\"upgrade-btn\">\n            <a target=\"_blank\" rel=\"noopener noreferrer\"\n              href={upgrade_url}><T>Upgrade to</T></a>\n          </div>}\n          {props.user &&\n          <a className=\"user-name\" target=\"_blank\" rel=\"noopener noreferrer\"\n            href={cp_url}>{props.user.displayName}</a>}\n          {!props.user &&\n          <a className=\"login-btn\" target=\"_blank\" rel=\"noopener noreferrer\"\n            href={login_url}>Sign in</a>}\n        </div>\n    );\n};\n\nexport class Page_layout extends React.Component {\n    render(){\n        let {user, is_plus, title} = this.props;\n        return <div className={classnames('page-layout', this.props.cls)}>\n          <Header user={user} is_plus={is_plus} title={title}/>\n          <div className='content'>\n            {this.props.children}\n          </div>\n        </div>;\n    }\n}\n\nexport function Section(props){\n    return <div className={classnames('section', props.cls)}>\n      <div className='title' onClick={props.on_click}>{props.title}</div>\n      <div className='card'>\n        {props.children}\n      </div>\n    </div>;\n}\n\nexport function Label_line(props){\n    return <label className='label-line'>\n      {props.label && <div className='label-line-label'>{props.label}</div>}\n      <div className='label-line-children'>{props.children}</div>\n    </label>;\n}\n\nexport class PureComponent extends React.Component {\n    constructor(props){\n        super(props);\n        this.state = {};\n    }\n    _mts_events = {};\n    _model_to_state(model, key, key_state){\n        let ev_name = `change:${key}`;\n        let entry = this._mts_events[ev_name] = {model,\n            fn: ()=>this.setState({[key_state||key]: model.get(key)})};\n        model.on(ev_name, entry.fn);\n        this.setState({[key_state||key]: model.get(key)});\n        if (!this._mts_inited)\n        {\n            window.addEventListener('unload', this._uninit_mts);\n            this._mts_inited = true;\n        }\n    }\n    _uninit_mts = ()=>{\n        if (!this._mts_inited)\n            return;\n        Object.entries(this._mts_events).forEach(\n            ([ev_name, {model, fn}])=>model.off(ev_name, fn));\n        window.removeEventListener('unload', this._uninit_mts);\n    };\n    model_to_state(model, key, key_state){\n        if (Array.isArray(key))\n            return key.forEach(k=>this._model_to_state(model, k));\n        this._model_to_state(model, key, key_state);\n    }\n    componentWillUnmount(){\n        this._uninit_mts();\n    }\n}\n\nexport class Modal extends React.Component {\n    constructor(props){\n        super(props);\n        this.el = document.createElement('div');\n        this.el.classList.add('page-layout');\n    }\n    componentDidMount(){\n        document.body.appendChild(this.el);\n    }\n    componentWillUnmount(){\n        document.body.removeChild(this.el);\n    }\n    render(){\n        return ReactDOM.createPortal(<div\n          className={classnames('page-modal', this.props.className)}>\n          <div className='page-modal-body'>\n            <div className='page-modal-title'>\n              <h3>{this.props.title}</h3>\n              <div className=\"icon-remove\" title={T('Close')}\n                onClick={this.props.on_close}/>\n            </div>\n            <div className='page-modal-content'>\n              {this.props.children}\n            </div>\n            {this.props.action && <div className='page-modal-actions'>\n              {this.props.action}\n            </div>}\n          </div>\n        </div>, this.el);\n    }\n}\n\nexport function Legal_section(props){\n    return <Section title={T('Legal')}>\n      <Label_line label={T('Privacy Policy')}>\n        <a href=\"https://hola.org/legal/privacy\">\n          https://hola.org/legal/privacy\n        </a>\n      </Label_line>\n      <Label_line label={T('End User License')}>\n        <a href=\"https://hola.org/legal/sla\">\n          https://hola.org/legal/sla\n        </a>\n      </Label_line>\n      {props.children}\n    </Section>;\n}\n\n"]}