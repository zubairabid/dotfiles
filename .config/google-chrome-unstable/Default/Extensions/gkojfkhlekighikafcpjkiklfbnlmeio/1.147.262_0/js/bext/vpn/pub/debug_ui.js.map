{"version":3,"sources":["debug_ui.js"],"names":["E","set_dbg_conf","path","value","conf","storage","get_json","zutil","set","set_json","be_vpn","force_bext_config_update","get_root_url","url","be_tabs","get","svc_util","Debug_conf_switch","props","handle_change","checked","e","target","set_conf_value","undefined","setState","state","equal_deep","get_conf_value","name","be_vpn_util","get_dbg_conf","trigger","children","React","PureComponent","Change_trial","error","on_change","event","on_click","_this","be_trial","ecall","toString","trial","Math","round","Debug_view","on_close","inited_sp","return","on_rule_rating","page","on_disable_debug","be_dev_mode","fcall","ui_popup","close_popup","enable_mitm","disable","discovery","enable_mitm_ui","Object","assign","popup","enable","enable_ext_ui","site_trial","min_ver","be_util","version","fa_rule","ip","host","port","fap_rule","get_popular_country","rule_ratings","get_host","get_ratings","popular_countries","tld","get_tld_country","ratings","proxy_country","push","rating","sort","a","b","min_suggest_rate","Rule_rating_view","onChange","country","zerr","notice","set_country","zurl","root_url","unblocking_rate_url","be_info","get_unblocking_rate_url","rate","show_geo","force_premium","need_mitm","get_unblocking_rate","unblocking_rate","i","r","be_rule","limit","vpn_only","_rule_ratings","be_premium","premium","_need_mitm","inited","catch$","err","console","render_debug_view","compact","log","flag","flag2","s","overflow","wordWrap","info","parseInt","popularity","textAlign","on_debug_rule_rating","json_str","Country_list","countries","pcountries","proxy_countries","bext","map","c","Redirect_view","get_redirect_list","list","o","JSON","stringify","replace","render_rule_rating","root","ReactDOM","render","render_redirect","opt","react_root","document","createElement","classList","add","body","appendChild","finally","unmountComponentAtNode","removeChild","init","ui","libs","cancel","wait"],"mappings":"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","file":"debug_ui.js","sourcesContent":["                   \n'use strict';                                              \nimport 'regenerator-runtime';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport etask from '/util/etask.js';\nimport zutil from '/util/util.js';\nimport storage from '/util/storage.js';\nimport be_util from '/bext/pub/util.js';\nimport be_vpn_util from '/bext/vpn/pub/util.js';\nimport pcountries from '/protocol/pub/countries.js';\nimport zerr from '/util/zerr.js';\nimport T from '/bext/pub/locale.js';\nimport zurl from '/util/url.js';\nconst E = {};\n\nfunction set_dbg_conf(path, value){\n    const conf = storage.get_json('hola_conf')||{};\n    zutil.set(conf, path, value);\n    storage.set_json('hola_conf', conf);\n    E.be_vpn.force_bext_config_update();\n}\n\nfunction get_root_url(){\n    let url = E.be_tabs.get('active.url')||'';\n    return E.svc_util.get_root_url(url);\n}\n\nclass Debug_conf_switch extends React.PureComponent {\n    constructor(props){\n        super(props);\n        this.value = props.value===undefined ? true : props.value;\n        this.state = {checked: zutil.equal_deep(this.value,\n            this.get_conf_value())};\n    }\n    get_conf_value(){\n        if (this.props.storage)\n            return storage.get_json(this.props.name);\n        return be_vpn_util.get_dbg_conf(this.props.name);\n    }\n    set_conf_value(value){\n        if (this.props.storage)\n        {\n            storage.set_json(this.props.name, value);\n            E.be_vpn.trigger('storage_debug_change');\n        }\n        else\n            set_dbg_conf(this.props.name, value);\n    }\n    handle_change = e=>{\n        const checked = e.target.checked;\n        this.set_conf_value(checked ? this.value : undefined);\n        this.setState({checked});\n    };\n    render(){\n        return <div className=\"debug_switch\">\n          <label>\n            <input type=\"checkbox\" checked={this.state.checked}\n              onChange={this.handle_change}/>\n            {this.props.children}\n          </label>\n        </div>;\n    }\n}\n\nclass Change_trial extends React.PureComponent {\n    state = {value: 60, error: null};\n    componentDidMount(){\n        let _this = this;\n        return etask(function*(){\n            let trial = yield E.be_trial.ecall('get_trial_active',\n                [get_root_url()]);\n            _this.setState({trial, value: 60});\n        });\n    }\n    on_change = event=>this.setState({value: event.target.value});\n    on_click = ()=>{\n        let _this = this;\n        this.setState({error: null});\n        etask(function*(){\n            try {\n                yield E.be_trial.ecall('set_time_left', [get_root_url(),\n                    _this.state.value*1000]);\n            } catch(e){ _this.setState({error: e.toString()}); }\n        });\n    };\n    render(){\n        let {state} = this;\n        if (!state || !state.trial)\n            return null;\n        return <div className=\"change-trial\">\n            Move trial time: <input type=\"number\" min=\"10\" step=\"30\"\n            value={Math.round(state.value)} onChange={this.on_change}/>\n            sec <button onClick={this.on_click}> Go</button>\n            {state.error && <div className=\"error-msg\">{state.error}</div>}\n          </div>;\n    }\n}\n\nclass Debug_view extends React.PureComponent {\n    state = {};\n    on_close = ()=>E.inited_sp.return();\n    on_rule_rating = ()=>this.setState({page: 'rule_rating'});\n    on_disable_debug = ()=>etask(function*(){\n        yield E.be_dev_mode.fcall('enable', [false]);\n        if (E.ui_popup)\n            E.ui_popup.close_popup();\n    });\n    render(){\n        let enable_mitm = {disable: false, trigger: true, discovery: 'auto'};\n        let enable_mitm_ui = Object.assign({popup: {enable: true},\n            enable_ext_ui: 1}, enable_mitm);\n        let site_trial = {min_ver: be_util.version()};\n        let fa_rule = {ip: '38.32.25.106', host: 'zagent1685.hola.org',\n            port: 22222};\n        let fap_rule = Object.assign({}, fa_rule, {port: 22223});\n        return <div className=\"debug_view\">\n          <header>\n            <h1>\n              Debug <i className=\"btn_close\" onClick={this.on_close}></i>\n            </h1>\n          </header>\n          {this.state.page=='rule_rating' ? <Rule_rating_view/> : undefined}\n          {!this.state.page ?\n            <div>\n              {E.be_dev_mode &&\n                <a onClick={this.on_disable_debug}>Disable debug</a>}\n              <Debug_conf_switch name=\"protect_ui2.protect_pc\">\n                Enable desktop app in protect ui\n              </Debug_conf_switch>\n              <Debug_conf_switch name=\"protect_ui2.protect_browser\">\n                Enable browser in protect ui\n              </Debug_conf_switch>\n              <Debug_conf_switch name=\"debug.show_redirect\">\n                Show redirect in popup\n              </Debug_conf_switch>\n              <Debug_conf_switch name=\"debug.show_rule_rating\">\n                Show rule rating in popup\n              </Debug_conf_switch>\n              <Debug_conf_switch name=\"geo_popup.watermark.enabled\">\n                Enable watermark popup\n              </Debug_conf_switch>\n              <Debug_conf_switch name=\"geo_popup.watermark.new_dialog\">\n                Enable new watermark dialogs\n              </Debug_conf_switch>\n              <Debug_conf_switch name=\"mitm\" value={enable_mitm}>\n                Enable mitm trigger\n              </Debug_conf_switch>\n              <Debug_conf_switch name=\"mitm\" value={enable_mitm_ui}>\n                Enable mitm trigger + ui\n              </Debug_conf_switch>\n              <Debug_conf_switch name=\"sites.svtplay_se\" value={site_trial}>\n                Enable svtplay trial\n              </Debug_conf_switch>\n              <Debug_conf_switch name=\"sites.netflix_com\" value={site_trial}>\n                Enable netflix trial\n              </Debug_conf_switch>\n              <Debug_conf_switch name=\"be_force_agent\" value={fa_rule}\n                storage={true}>\n                Force using pool for streaming\n              </Debug_conf_switch>\n              <Debug_conf_switch name=\"be_force_agent\" value={fap_rule}\n                storage={true}>\n                Force using peer for streaming\n              </Debug_conf_switch>\n              <Debug_conf_switch name=\"be_watermark_debug\" value={true}\n                storage={true}>\n                Watermark debug\n              </Debug_conf_switch>\n              <Debug_conf_switch name=\"react.enabled_ui\" value={true}>\n                New ui (react)\n              </Debug_conf_switch>\n              <Debug_conf_switch name=\"signin_redirect_back_to_site\"\n                value={true}>\n                Redirect to site after sign in\n              </Debug_conf_switch>\n              <Debug_conf_switch name=\"stub_selection_for_skip_urls\"\n                value={true}>\n                Stub rules for skip urls\n              </Debug_conf_switch>\n              <Change_trial/>\n              <a onClick={this.on_rule_rating}>Rule rating page</a>\n            </div> : undefined\n          }\n          </div>;\n    }\n}\n\n                            \nfunction get_popular_country(host, rule_ratings){\n    return be_vpn_util.get_popular_country({host: host||E.get_host(),\n        rule_ratings: rule_ratings});\n}\n\n                            \nfunction get_ratings(host, rule_ratings){\n    var popular_countries = get_popular_country(host, rule_ratings);\n    var tld = be_vpn_util.get_tld_country(host);\n    var ratings = [popular_countries[0], popular_countries[1]];\n    if (tld && tld!=ratings[0].proxy_country &&\n        tld!=ratings[1].proxy_country)\n    {\n        ratings.push({proxy_country: tld, rating: 0.1});\n        ratings.sort(function(a, b){ return b.rating-a.rating; });\n    }\n    if (tld && tld!=ratings[0].proxy_country &&\n        tld!=ratings[1].proxy_country)\n    {\n        ratings.push({proxy_country: tld, rating: 0.1});\n        ratings.sort(function(a, b){ return b.rating-a.rating; });\n    }\n    return ratings;\n}\n\nlet min_suggest_rate=0.3;                                 \nclass Rule_rating_view extends React.PureComponent {\n    state = {};\n    set_country(country){\n        let _this = this, url = E.be_tabs.get('active.url')||'';\n        let host = zurl.get_host(url);\n        let root_url = E.svc_util.get_root_url(url);\n        let unblocking_rate_url = E.be_info.get_unblocking_rate_url(200,\n            country);\n        let rate, show_geo, rule_ratings, ratings, force_premium, need_mitm;\n                                                             \n        etask([function(){\n            return E.be_info.get_unblocking_rate(200, country);\n        }, function(unblocking_rate){\n            for (let i=0, r; !rate && (r = unblocking_rate[i]); i++)\n            {\n                if (r.root_url==root_url)\n                    rate = r;\n            }\n            show_geo = rate && rate.unblocking_rate>min_suggest_rate;\n        }, function(){\n            return E.be_rule.ecall('get_rule_ratings',\n                [{root_url: root_url, country, limit: 20, vpn_only: true}]);\n        }, function(_rule_ratings){\n            rule_ratings = _rule_ratings;\n            return E.be_premium.ecall('get_force_premium_rule', [root_url]);\n        }, function(premium){\n            force_premium = !!premium;\n            return E.be_vpn.ecall('mitm_need_popup', [url]);\n        }, function(_need_mitm){\n            need_mitm = _need_mitm;\n            ratings = get_ratings(host, rule_ratings);\n            _this.setState({inited: true, rate, show_geo, ratings,\n                rule_ratings, force_premium, need_mitm, country, root_url,\n                unblocking_rate_url});\n        }, function catch$(err){\n            console.error('debug_ui error %s %o', err, err);\n        }]);\n\n    }\n    componentDidMount(){\n        let country = E.be_info.get('country');\n        this.set_country(country);\n    }\n    on_debug_rule_rating(){ E.render_debug_view(); }\n    render(){\n        let {compact} = this.props;\n        let {country, root_url, unblocking_rate_url, rate, show_geo, inited,\n            ratings, rule_ratings, force_premium, need_mitm} = this.state;\n        console.log('---- country %s root_url %s unblocking_rate_url %s '+\n            'rate %o show_geo', country, root_url, unblocking_rate_url, rate,\n            show_geo);\n        var flag = ratings && ratings[0].proxy_country;\n        var flag2 = ratings && ratings[1].proxy_country;\n                              \n        var s = {overflow: 'auto', wordWrap: 'normal'};\n        if (compact)\n        {\n            if (!inited)\n                return <div/>;\n            let info = !rate ? 'no rating' :\n                'rate from '+country+' '+\n                    parseInt(rate.unblocking_rate*100)+'% ('+\n                    parseInt(rate.popularity)+')';\n            return <div style={{textAlign: 'left', overflow: 'auto'}}\n              onClick={this.on_debug_rule_rating}>\n              <div style={s}>\n                <div>{info}</div>\n                flags {flag} {flag2}\n                {force_premium ? ' plus' : ''}\n                {need_mitm ? ' mitm' : ''}\n                {show_geo ? ' geo' : ''}\n              </div>\n            </div>;\n        }\n        return <div style={{textAlign: 'left'}}>\n          <div style={s}>root_url: {root_url}</div>\n          <div style={s}>your country: {country}</div>\n          <div style={s}>\n            <Country_list country='IL' onChange={this.onChange}/>\n          </div>\n          <div style={s}>1st flag: {flag}</div>\n          <div style={s}>2nd flag: {flag2}</div>\n          <div style={s}>premium popup: {''+!!force_premium}</div>\n          <div style={s}>mitm popup: {''+!!need_mitm}</div>\n          <div style={s}>geo popup: {''+!!show_geo}</div>\n          <div style={s}>geo threshold: {min_suggest_rate}</div>\n          <div style={s}>\n            <br/><div>{json_str(rate)}</div><br/>\n            <div>{json_str(ratings)}</div><br/>\n            <div>{json_str(rule_ratings)}</div><br/>\n            <div>unblocking_rate_url: {unblocking_rate_url}</div>\n          </div>\n        </div>;\n    }\n    onChange = e=>{\n        let country = e.target.value;\n        zerr.notice('set country %s', country);\n        this.set_country(country);\n    };\n}\n\nclass Country_list extends React.PureComponent {\n    render(){\n        let countries = pcountries.proxy_countries.bext.map(c=>{\n            return <option key={c} value={c} selected={c==this.props.country}>\n              {T(c)}</option>;\n        });\n        return <select onChange={this.props.onChange}>{countries}</select>;\n    }\n}\n\nclass Redirect_view extends React.PureComponent {\n    state = {};\n    componentDidMount(){\n        let _this = this;\n        etask([function(){\n            return _this.props.get_redirect_list();\n        }, function(list){ _this.setState({list}); }]);\n    }\n    render(){\n        let {list} = this.state;\n        if (!zutil.get(list, 'length'))\n            return <span/>;\n        var s = {overflow: 'auto', wordWrap: 'normal', textAlign: 'left'};\n        return <div style={s}>redirects: {json_str(list)}</div>;\n    }\n}\n\nfunction json_str(o){\n    let s = JSON.stringify(o||'');\n    return s.replace(/,/, ', ').replace(/\"/g, '');\n}\n\nE.render_rule_rating = function(root){\n    ReactDOM.render(<Rule_rating_view compact={true}/>, root);\n};\n\nE.render_redirect = function(root, opt){\n    opt = opt||{};\n    ReactDOM.render(\n        <Redirect_view get_redirect_list={opt.get_redirect_list}/>, root);\n};\n\nE.render_debug_view = function(){\n    const react_root = document.createElement('div');\n    react_root.classList.add('react_root');\n    document.body.appendChild(react_root);\n    ReactDOM.render(<Debug_view/>, react_root);\n    E.inited_sp.finally(()=>{\n        ReactDOM.unmountComponentAtNode(react_root);\n        document.body.removeChild(react_root);\n    });\n};\n\nE.init = (ui, libs)=>etask({cancel: true}, function*(){\n    libs = libs||{};\n    if (E.inited_sp)\n        return;\n    E.be_vpn = ui.be_vpn;\n    E.be_tabs = ui.be_tabs;\n    E.be_info = ui.be_info;\n    E.be_rule = ui.be_rule;\n    E.be_premium = ui.be_premium;\n    E.be_dev_mode = ui.be_dev_mode;\n    E.ui_popup = ui.ui_popup;\n    E.be_trial = ui.be_trial;\n    E.svc_util = libs.svc_util;\n    E.inited_sp = this;\n    E.inited_sp.finally(()=>E.inited_sp = undefined);\n    yield this.wait();\n});\n\nexport default E;\n"]}