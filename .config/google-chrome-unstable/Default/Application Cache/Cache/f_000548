function Tjf(a,b){H(a,1,b)}function Ujf(){var a=dM.getInstance();return new Pm(function(b,c){A_d(a,"/dbx/schedules",function(d){var e=new Vj;e.Ug=!0;d=e.Oc(Y5b.xa(),d.Fe());b(d)},c)})}function Vjf(a){var b=dM.getInstance(),c=new Vj;c.Ug=!0;var d=c.serialize(a);return new Pm(function(e,f){eM(b,"/dbx/createSchedule",[],d,function(h){c.Ug=!0;h=c.Oc(S5b.xa(),h.Fe());e(h)},f)})}
function Wjf(a){var b=dM.getInstance(),c=new Vj;c.Ug=!0;var d=c.serialize(a);return new Pm(function(e,f){eM(b,"/dbx/updateSchedule",[],d,function(h){c.Ug=!0;h=c.Oc(W5b.xa(),h.Fe());e(h)},f)})}function Xjf(a){if(a.F)return[];var b=[];a.C.forEach(function(c,d){T7b.has(c.D)&&!ritz_api.BigSheetsApi.isExternalDataForDatasourceSheetPreview(d)&&b.push(d)});return b}function Yjf(a,b){b=b.map(function(c){return new rBd(c.rq(),c.Vh())});ABd(a,b)}
function Zjf(a,b,c,d){yBd(a.J,b,function(e){var f=e.filter(function(h){return 3==h.Vh().getState()});Yjf(a,f);c(e)},function(e){Yjf(a,e);d(e)})}function $jf(a){a.Db()&&X8d(a.F)}function akf(a,b){$8d.call(this,a,b)}t(akf,$8d);akf.prototype.R=function(){this.refresh()};akf.prototype.refresh=function(){if(this.Db()){var a=yB.isEnabled();a=this.J&&this.L&&a&&0<Xjf(this.H).length;this.C.Na(a)}};akf.prototype.O=n("Refresh all");function bkf(a,b,c){b=c||b;a=a||{};a=""+P(XU(Uv({title:"Connected sheets",Gu:"waffle-dataconnector-refresh-sidepane",cC:Xv(""+P(hA({icon:"docs-icon-img docs-icon-database"},b))),Uj:Xv('<div class="'+U("waffle-dataconnector-refresh-sidepane-container")+'"><div class="'+U("waffle-dataconnector-refresh-sidepane-refresh-widget")+'"></div></div><div class="'+U("waffle-dataconnector-refresh-sidepane-backdrop")+'"></div>'),uQ:!0,HQ:Xv('<div class="'+U("waffle-dataconnector-refresh-sidepane-footer-wrapper")+
'"></div>')},a),b));return T(a)};function ckf(){return T('<div class="'+U("waffle-dataconnector-refresh-all-pane")+'"><div class="'+U("waffle-dataconnector-refresh-all-stale-msg")+'">This panel may be out of date. Close and reopen it to display the latest information.</div><div class="'+U("waffle-dataconnector-refresh-all-datasources-container")+'"></div></div>')}
function dkf(){return T('<div class="'+U("waffle-dataconnector-refresh-all-dbobject-list-items-container")+'"></div><div class="'+U("waffle-dataconnector-refresh-all-dbobject-list-footer-container")+'"></div>')}function ekf(a,b,c){b=c||b;return T('<div class="'+U("waffle-dataconnector-refresh-all-dbobject-list-single-datasource-title")+'"></div>'+dkf(null,b))}
function fkf(){return T('<div class="'+U("waffle-dataconnector-refresh-all-dbobject-list-footer")+'"><div class="'+U("waffle-dataconnector-refresh-all-dbobject-list-footer-bytes-wrapper")+'"></div><div class="'+U("waffle-dataconnector-refresh-all-dbobject-list-footer-button-wrapper")+'"></div></div>')}
function gkf(a){a=a.title;return T('<div class="'+U("waffle-dataconnector-refresh-all-dbobject-item")+'"><div class="'+U("waffle-dataconnector-refresh-all-dbobject-item-icon-wrapper")+'"><div class="'+U("waffle-dataconnector-refresh-all-dbobject-item-icon-refresh")+'">'+P(t0d())+'</div><div class="'+U("waffle-dataconnector-refresh-all-dbobject-item-icon-spinner")+'"></div></div><div class="'+U("waffle-dataconnector-refresh-all-dbobject-item-title")+'">'+P(a)+'</div><div class="'+U("waffle-dataconnector-refresh-all-dbobject-item-status-wrapper")+
'"><div class="'+U("waffle-dataconnector-refresh-all-dbobject-item-timestamp")+'"></div><div class="'+U("waffle-dataconnector-refresh-all-dbobject-item-error")+'">Error</div><div class="'+U("waffle-dataconnector-refresh-all-dbobject-item-loading")+'">Loading\u2026</div><div class="'+U("waffle-dataconnector-refresh-all-dbobject-item-running")+'">Running\u2026</div></div></div>')};function hkf(a,b,c,d){O.call(this,d);this.D=a;this.L=b;this.J=c;this.H=new q0d;this.C=new JT(!1);this.F=!0}t(hkf,O);hkf.prototype.Ba=function(){this.wb(W(gkf,{title:this.L}))};
hkf.prototype.Ha=function(){var a=this;O.prototype.Ha.call(this);V(this.Ma(),"waffle-dataconnector-refresh-all-dbobject-item-enabled");this.C.render(this.Fa("waffle-dataconnector-refresh-all-dbobject-item-icon-spinner"));this.getHandler().listen(this.Ma(),"click",function(){if(a.F){var b=new WG("refresh-db-object-request");b.tAa=a.D;a.dispatchEvent(b)}});ikf(this);jkf(this)};
function jkf(a){var b=C_d(a.J,a.D);switch(b.getType()){case "invalid-db-object":case "insufficient-access":case "fetch-failed":kkf(a,"waffle-dataconnector-refresh-all-dbobject-item-error");lkf(a);break;case "offline":lkf(a);break;case "loading":kkf(a,"waffle-dataconnector-refresh-all-dbobject-item-loading");mkf(a);break;case "fetching-results":kkf(a,"waffle-dataconnector-refresh-all-dbobject-item-running");mkf(a);break;case "no-results":ikf(a);lkf(a);break;case "fetch-successful":b=b.C.tv();b=a.H.format(b);
cu(a.Fa("waffle-dataconnector-refresh-all-dbobject-item-timestamp"),b);kkf(a,"waffle-dataconnector-refresh-all-dbobject-item-timestamp");lkf(a);break;case "do-not-show":break;default:throw Error("Unexpected DbObjectUiStateType");}}hkf.prototype.Na=function(a){this.F=a;var b=this.Ma();a?Cw(b,"waffle-dataconnector-refresh-all-dbobject-item-disabled","waffle-dataconnector-refresh-all-dbobject-item-enabled"):Cw(b,"waffle-dataconnector-refresh-all-dbobject-item-enabled","waffle-dataconnector-refresh-all-dbobject-item-disabled")};
function kkf(a,b){ikf(a);N(a.Fa(b),!0)}function lkf(a){a.C.setActive(!1);N(a.Fa("waffle-dataconnector-refresh-all-dbobject-item-icon-spinner"),!1);N(a.Fa("waffle-dataconnector-refresh-all-dbobject-item-icon-refresh"),!0)}function mkf(a){a.C.setActive(!0);N(a.Fa("waffle-dataconnector-refresh-all-dbobject-item-icon-refresh"),!1);N(a.Fa("waffle-dataconnector-refresh-all-dbobject-item-icon-spinner"),!0)}
function ikf(a){["waffle-dataconnector-refresh-all-dbobject-item-timestamp","waffle-dataconnector-refresh-all-dbobject-item-error","waffle-dataconnector-refresh-all-dbobject-item-loading","waffle-dataconnector-refresh-all-dbobject-item-running"].forEach(function(b){return N(a.Fa(b),!1)})};function nkf(a,b,c,d,e){O.call(this,e);this.L=new Set(a);this.J=b;this.H=[];this.F=c;this.D=this.C=null;d&&(this.C=new okf(this.qa()),this.D=new JZ(this.F,this.qa(),!0,!0));this.O=new Map([[1,0],[2,0],[3,0],[4,0],[5,0]])}t(nkf,O);nkf.prototype.Ba=function(){this.D?(this.D.render(),this.wb(this.D.Ma()),this.D.setContent(W(dkf))):this.wb(W(ekf))};
nkf.prototype.Ha=function(){var a=this;O.prototype.Ha.call(this);this.D||cu(this.Fa("waffle-dataconnector-refresh-all-dbobject-list-single-datasource-title"),this.F);pkf(this);var b=this.getHandler();this.H.forEach(function(c){b.listen(c,"refresh-db-object-request",function(d){d=d.tAa;T7b.has(C_d(a.J,d).D)&&xlb.Eb([d])})});this.C&&(this.C.render(this.Fa("waffle-dataconnector-refresh-all-dbobject-list-footer-container")),b.listen(this.C,"action",this.R))};
function pkf(a){var b=a.Fa("waffle-dataconnector-refresh-all-dbobject-list-items-container");a.L.forEach(function(c){var d=ritz_api.BigSheetsApi.getDbObjectTypeForExternalDataSourceId(c);d=qkf(a,d);c=new hkf(c,d,a.J,a.qa());a.H.push(c);c.render(b)})}
function qkf(a,b){switch(b){case 1:return"Pivot table "+rkf(a,1);case 2:return"Chart "+rkf(a,2);case 3:return"Function "+rkf(a,3);case 4:return"Connected sheet "+rkf(a,4);case 5:return"Table "+rkf(a,5);default:throw Error("Unexpected DbObjectType");}}function rkf(a,b){var c=a.O.get(b);a.O.set(b,c+1);return 0==c?"":c.toString()}nkf.prototype.R=function(){var a=this,b=Array.from(this.L).filter(function(c){return T7b.has(C_d(a.J,c).D)});xlb.Eb(b)};
function skf(a){a.H.forEach(function(b){return jkf(b)})}function tkf(a,b){a.C&&(b=b.filter(function(c){return a.L.has(c.rq())}),ukf(a.C,b))}function vkf(a,b){a.F=b;a.D?a.D.getHeader().setContent(b):cu(a.Fa("waffle-dataconnector-refresh-all-dbobject-list-single-datasource-title"),b)}nkf.prototype.Na=function(a){this.C&&this.C.Na(a);this.H.forEach(function(b){return b.Na(a)})};function okf(a){O.call(this,a);this.D=new sV("Refresh",this.qa());this.Ga(this.D);this.C=new W8d;this.Ga(this.C)}t(okf,O);
okf.prototype.Ba=function(){this.wb(W(fkf))};okf.prototype.Ha=function(){O.prototype.Ha.call(this);this.D.render(this.Fa("waffle-dataconnector-refresh-all-dbobject-list-footer-button-wrapper"));this.C.render(this.Fa("waffle-dataconnector-refresh-all-dbobject-list-footer-bytes-wrapper"))};function ukf(a,b){var c=0;b.forEach(function(d){return c+=parseInt(G(d,2),10)});Z8d(a.C,c);a.D.Na(!0)}okf.prototype.Na=function(a){this.D.Na(a)};function wkf(a,b){O.call(this,b);this.F=a;this.D=a.oa;this.C=[]}t(wkf,O);wkf.prototype.Ba=function(){this.wb(W(ckf))};wkf.prototype.Ha=function(){var a=this;O.prototype.Ha.call(this);xkf(this);1<this.C.length&&this.C[0].D.getHeader().Zb(!0);N(this.Fa("waffle-dataconnector-refresh-all-stale-msg"),!1);this.getHandler().listen(this.F.C,"fa",function(b){return ykf(a,b)})};
function xkf(a){var b=zkf(a);if(1==b.size){var c=b.entries().next().value;b=c[1];c=Akf(a,c[0]);b=new nkf(b,a.D,c,!1,a.qa());a.C.push(b);b.render(a.Fa("waffle-dataconnector-refresh-all-datasources-container"))}else{c=la(b.keys());for(var d=c.next();!d.done;d=c.next()){var e=d.value;d=Akf(a,e);e=b.get(e);d=new nkf(e,a.D,d,!0,a.qa());a.C.push(d);d.render(a.Fa("waffle-dataconnector-refresh-all-datasources-container"))}}}
function zkf(a){var b=new Map;Array.from(a.D.C.keys()).forEach(function(c){if(ritz_api.BigSheetsApi.isExternalDataForDatasourceSheetPreview(c))var d=!1;else d=ritz_api.BigSheetsApi.getDbObjectTypeForExternalDataSourceId(c),d=Bkf.has(d);d&&(d=ritz_api.BigSheetsApi.getDataSourceIdForExternalDataId(c),b.has(d)?b.get(d).push(c):b.set(d,[c]))});return b}function Akf(a,b){b=ritz_api.BigSheetsApi.getSheetIdForDatasourceId(b);return OI(a.F.C,b).Ud()}
function Ckf(a,b){a.C.forEach(function(c){return tkf(c,b)})}function Dkf(a){a.C.forEach(function(b){b.C&&Y8d(b.C.C)})}function Ekf(a){a.C.forEach(function(b){b.C&&(b=b.C,X8d(b.C),b.D.Na(!1))})}function Fkf(a){a.C.forEach(function(b){return skf(b)})}wkf.prototype.Na=function(a){this.C.forEach(function(b){return b.Na(a)})};function ykf(a,b){3==OI(a.F.C,b.Lh).getSheetType()&&(a=a.C.find(function(c){return c.F==b.C}))&&vkf(a,b.tm)}
var Bkf=new Set([2,4,3,1,5]),Gkf={"margin-top":"-43px"},Hkf={"margin-top":"0"},Ikf={Xi:"margin-top",duration:.1,timing:"ease-out",delay:0};function Jkf(a,b,c){b=void 0===b?QV.getInstance():b;yx.call(this,"",void 0,c);a&&Kkf(a);this.C=new Lkf(a,b,c);this.Ga(this.C)}t(Jkf,yx);r=Jkf.prototype;r.Ba=function(){this.C.Ba();this.wb(this.C.Ma())};r.Nc=function(a){a.qm(!0);this.C.Nc(a)};r.rt=function(a,b){a.qm(!0);this.C.rt(a,b)};r.uf=function(a){return this.C.uf(a)};r.Jh=function(){return this.C.Jh()};r.Cd=function(){return this.C.C.map(function(a){return a.getValue()})};
function Mkf(a,b){a=a.C;for(var c=la(a.C),d=c.next();!d.done;d=c.next())d.value.Zb(!1);if(0==b.length)a.C=[];else{c=[];d=b.length;for(var e=0;e<a.Jh();e++){var f=a.uf(e),h=f.getValue();if(0<=b.indexOf(h)&&(f.Zb(!0),c.push(f),0==--d))break}a.C=c}a.eC()}r.Ob=function(){return this.C.Ob()};r.De=function(a){Kkf(a);this.C.De(a)};function Kkf(a){for(var b=0;b<a.Lc();b++)a.Gc(b).qm(!0)}function Lkf(a,b,c){b=void 0===b?QV.getInstance():b;RV.call(this,a,b,c);this.C=[]}t(Lkf,RV);
Lkf.prototype.De=function(a){RV.prototype.De.call(this,a);this.C=[];this.eC()};Lkf.prototype.Xt=function(a){a.stopPropagation();a=a.target;if(a.isChecked()){var b=this.Ob();vd(this.C,a,function(c,d){return rd(Nv(b,c),Nv(b,d))})}else id(this.C,a);this.eC();this.dispatchEvent("change")};Lkf.prototype.J=function(){var a;0==this.C.length?a=this.F:a=this.C.map(function(b){return b.Gg()}).join(", ");return a||""};function Nkf(){var a='<div class="'+U("waffle-dataconnector-refresh-schedules-widget")+'"><div class="'+U("waffle-dataconnector-refresh-schedules-header")+'"><div><div class="'+U("waffle-dataconnector-refresh-schedules-header-title")+'">';a=a+'Scheduled refresh</div><div class="'+(U("waffle-dataconnector-refresh-schedules-setup-btn")+'"></div><div class="'+U("waffle-dataconnector-refresh-schedules-info-section")+'"><span class="'+U("waffle-dataconnector-refresh-schedules-info-text")+'"></span><span class="'+
U("waffle-dataconnector-refresh-schedules-edit-btn")+'"></span></div></div><div class="'+U("waffle-dataconnector-refresh-schedules-enable-switch")+'"></div></div><div class="'+U("waffle-dataconnector-refresh-schedules-edit-section")+'"><div class="'+U("waffle-dataconnector-refresh-schedules-edit-section-row")+'"><span class="'+U("waffle-dataconnector-refresh-schedules-edit-section-row-label")+'">Refresh all</span><div class="'+U("waffle-dataconnector-refresh-schedules-frequency-select")+" "+U("waffle-dataconnector-refresh-schedules-select")+
'"></div></div><div class="'+U("waffle-dataconnector-refresh-schedules-edit-section-row")+" "+U("waffle-dataconnector-refresh-schedules-edit-section-row-date")+'"><span class="'+U("waffle-dataconnector-refresh-schedules-edit-section-row-label")+'">On date</span><div class="'+U("waffle-dataconnector-refresh-schedules-date-select")+" "+U("waffle-dataconnector-refresh-schedules-select")+'"></div></div><div class="'+U("waffle-dataconnector-refresh-schedules-edit-section-row")+'"><span class="'+U("waffle-dataconnector-refresh-schedules-edit-section-row-label")+
'">Between</span><div class="'+U("waffle-dataconnector-refresh-schedules-time-select")+" "+U("waffle-dataconnector-refresh-schedules-select")+'"></div></div><div class="'+U("waffle-dataconnector-refresh-schedules-owner-info")+'"></div><div class="'+U("waffle-dataconnector-refresh-schedules-btns")+'"><div class="'+U("waffle-dataconnector-refresh-schedules-cancel-btn")+'"></div><div class="'+U("waffle-dataconnector-refresh-schedules-save-btn")+'"></div></div></div></div>');return T(a)};var Okf=new NA(7),Pkf=new NA(PA.MONTH_DAY_ABBR),Qkf=new Dz("{DAY, selectordinal, one {#st}two {#nd}few {#rd}other {#th}}");
function Rkf(a,b){O.call(this,b);var c=new fy;c.Ga(new ay("Every day",1),!0);c.Ga(new ay("Every week",2),!0);c.Ga(new ay("Every month",3),!0);this.D=new RV(c,QV.getInstance(),b);Cy(this.D,"Add frequency");this.Ga(this.D);this.C=new Jkf(void 0,QV.getInstance(),b);Cy(this.C.C,"Add date");this.Ga(this.C);c=new fy;var d=new Date(La());d.setUTCHours(0,0,0,0);var e=a.getTimezoneOffset(d);a=Array(24);for(var f=0;24>f;f++){d.setUTCHours(f);var h=new Date(d.getTime()-e),k=new Date(h.getTime()),l=new Date(h.getTime());
l.setUTCHours(h.getUTCHours()+4);k=Okf.format(k)+" - "+Okf.format(l);a[h.getHours()]={value:f,label:k}}for(d=0;24>d;d++)e=new ay(a[d].label,a[d].value),c.Ga(e,!0);this.J=new RV(c,QV.getInstance(),b);Cy(this.J,"Add time");this.Ga(this.J);this.R=new $P("Cancel");this.Ga(this.R);this.O=new qV("Save",b);this.O.Na(!1);this.Ga(this.O);this.L=new Xx("",bO.getInstance(),b);this.Ga(this.L);this.V=new Xx("Setup now",bO.getInstance(),b);this.Ga(this.V);this.H=new EW(b);this.Ga(this.H);this.rb=3;this.F=null;
this.oa=new h$d(500,500,"dbxScheduleOnCompleteAuth");this.va(this.oa)}t(Rkf,O);r=Rkf.prototype;r.Ba=function(){O.prototype.Ba.call(this);this.wb(W(Nkf))};
r.Ha=function(){O.prototype.Ha.call(this);this.R.render(this.Fa("waffle-dataconnector-refresh-schedules-cancel-btn"));this.L.render(this.Fa("waffle-dataconnector-refresh-schedules-edit-btn"));this.H.render(this.Fa("waffle-dataconnector-refresh-schedules-enable-switch"));this.D.render(this.Fa("waffle-dataconnector-refresh-schedules-frequency-select"));this.O.render(this.Fa("waffle-dataconnector-refresh-schedules-save-btn"));this.V.render(this.Fa("waffle-dataconnector-refresh-schedules-setup-btn"));
this.J.render(this.Fa("waffle-dataconnector-refresh-schedules-time-select"));this.C.render(this.Fa("waffle-dataconnector-refresh-schedules-date-select"));Skf(this,!1);this.getHandler().listen(this.L,"action",this.nRb).listen(this.R,"action",this.PQb).listen(this.O,"action",this.BSb).listen(this.V,"action",this.FSb).listen(this.H,"action",this.oRb).listen(this.D,"change",this.zRb).listen(this.C,"change",this.q1).listen(this.J,"change",this.q1);Tkf(this)};
function Ukf(a){if(!a.isDisposed()){var b=a.Fa("waffle-dataconnector-refresh-schedules-edit-section"),c=a.Fa("waffle-dataconnector-refresh-schedules-info-section"),d=a.Fa("waffle-dataconnector-refresh-schedules-owner-info"),e=a.Fa("waffle-dataconnector-refresh-schedules-setup-btn"),f=a.Fa("waffle-dataconnector-refresh-schedules-enable-switch");N(e,!1);N(f,!1);N(b,!1);N(c,!1);N(d,!1);vw(a.Ma(),"waffle-dataconnector-refresh-schedules-widget-opened",!1);var h="Will run as you.";switch(a.rb){case 1:N(e,
!0);break;case 2:N(b,!0);N(d,!0);cu(d,h);vw(a.Ma(),"waffle-dataconnector-refresh-schedules-widget-opened",!0);a.q1();break;case 5:N(c,!0);N(f,!0);N(b,!0);N(d,!0);vw(a.Ma(),"waffle-dataconnector-refresh-schedules-widget-opened",!0);(b=G(G(a.F,4),1))&&(h+=" Currently running as "+b);cu(d,h);d=G(a.F,2);a.H.Zb(!!G(d,1));h=d.uq().uq();a.D.setValue(h);switch(h){case 1:Skf(a,!1);break;case 2:Mkf(a.C,kg(d.uq(),4));Skf(a,!0);break;case 3:Mkf(a.C,kg(d.uq(),5)),Skf(a,!0)}a.J.setValue(G(d.uq(),2));a.q1();break;
case 4:N(f,!0),N(c,!0),h=!!G(G(a.F,2),1),a.H.Zb(h),d=a.F.getStatus(),b=a.Fa("waffle-dataconnector-refresh-schedules-info-text"),h&&G(d,1)?(cu(b,"Next:"),h=new Date(1E3*G(d,2)),d=new Date(1E3*G(d,3)),a.L.setContent(nu(a.qa(),Vkf(h,d)))):(cu(b,"Paused"),a.L.setContent("Edit"))}a.dispatchEvent(rw(a.Ma(),"waffle-dataconnector-refresh-schedules-widget-opened")?"ai":"$h")}}r.PQb=function(){this.rb=2==this.rb?1:4;Ukf(this)};r.nRb=function(){this.rb=5;Ukf(this)};
r.zRb=function(){var a=this.D.getValue();Mkf(this.C,[]);switch(a){case 1:Skf(this,!1);break;case 2:Skf(this,!0);a=this.C.De(Wkf());E(a);break;case 3:Skf(this,!0),a=this.C.De(Xkf()),E(a)}this.q1()};
r.BSb=function(){var a=this.D.getValue(),b=new qL,c=new sL;c.TB(a);if(2===a){var d=la(this.C.Cd());for(a=d.next();!a.done;a=d.next())ig(c,4,a.value)}else if(3===a)for(d=la(this.C.Cd()),a=d.next();!a.done;a=d.next())ig(c,5,a.value);a=this.J.getValue();H(c,2,a);b.TB(c);H(b,3,1);2==this.rb?(b.Na(!0),Ykf(this,b,null)):(b.Na(this.H.isChecked()),Zkf(this,b,null))};r.FSb=function(){this.rb=2;Ukf(this)};
r.oRb=function(){if(4==this.rb){var a=G(this.F,2),b=this.H.isChecked();a.Na(b);this.H.Zb(!b);Zkf(this,a,null)}};r.q1=function(){var a=!!this.D.hf(),b=1===this.D.getValue()||0<this.C.Cd().length,c=!!this.J.hf();this.O.Na(a&&b&&c)};function Ykf(a,b,c,d){d=void 0===d?!0:d;var e=new Q5b;H(e,1,b);c&&H(e,2,c);Vjf(e).then(function(f){return $kf(a,b,f.getStatus(),G(f,2),!0,d)},ba())}
function Zkf(a,b,c,d){d=void 0===d?!0:d;var e=new U5b;Tjf(e,a.F.getId());H(e,2,b);c&&H(e,3,c);Wjf(e).then(function(f){return $kf(a,b,f.getStatus(),G(f,2),!1,d)},ba())}function $kf(a,b,c,d,e,f){switch(c){case 1:Tkf(a);break;case 2:f&&i$d(a.oa,d,function(h){a.isDisposed()||(e?Ykf(a,b,h,!1):Zkf(a,b,h,!1))})}}function Tkf(a){a.rb=3;Ukf(a);Ujf().then(function(b){a.isDisposed()||(b=kg(b,1),0==b.length?(a.rb=1,a.F=null):(a.rb=4,a.F=b[0]),Ukf(a))},ba())}
function Skf(a,b){N(a.Fa("waffle-dataconnector-refresh-schedules-edit-section-row-date"),b)}function Wkf(){var a=new fy,b=(IA.FIRSTDAYOFWEEK+1)%7,c=IA.WEEKDAYS.map(function(d,e){return[d,(e+6)%7+1]});b=la(c.slice(b).concat(c.slice(0,b)));for(c=b.next();!c.done;c=b.next())c=c.value,a.Ga(new ay(c[0],c[1]),!0);return a}function Xkf(){for(var a=new fy,b=1;28>=b;b++)a.Ga(new ay(Qkf.format({DAY:b}),b),!0);return a}
function Vkf(a,b){var c=new SA,d=Pkf.format(a)+" \u00b7 ";var e=Okf.format(a)+" - "+Okf.format(b);d+=e;a.getDate()!==b.getDate()&&(d+=c.fd("sup")+"+1"+c.bd("sup"));return c.format(d)};function alf(a,b,c){WT.call(this,c);this.Aa=b;this.J=b.oa;this.H=a;this.R=new wkf(b,this.qa());this.Ga(this.R);this.D=new akf(this.J,c);this.va(this.D);this.F=null;B(A(),"fedsr")&&(this.F=new Rkf(this.H,c),this.Ga(this.F))}t(alf,WT);alf.prototype.Ba=function(){WT.prototype.Ba.call(this);this.wb(W(bkf,{id:this.getId(),Rd:!0}));this.D.render(this.Fa("waffle-dataconnector-refresh-sidepane-footer-wrapper"))};
alf.prototype.Ha=function(){var a=this;WT.prototype.Ha.call(this);B(A(),"fedsr")&&(this.F.render(this.Ma()),this.getHandler().listen(this,["$h","ai"],this.V));this.R.render(this.Fa("waffle-dataconnector-refresh-sidepane-refresh-widget"));this.getHandler().listen(this.D,"refresh-db-object-request",function(){var b=Xjf(a.J);xlb.Eb(b)});this.D.refresh();N(this.Fa("waffle-dataconnector-refresh-sidepane-backdrop"),!1)};
function blf(a,b){Ckf(a.R,b);var c=0;b.forEach(function(d){return c+=parseInt(G(d,2),10)});a.D.dC(c)}alf.prototype.V=function(a){N(this.Fa("waffle-dataconnector-refresh-sidepane-backdrop"),"ai"===a.type)};function clf(a,b,c){ZU.call(this,a,b);var d=this;this.C=c;this.D=new nm;this.va(this.D);rm(this.D,this.C.D,function(e){if("dbobjectmodel-event-add"==e.getType()||"dbobjectmodel-event-remove"==e.getType()){e=d.ea.R.Fa("waffle-dataconnector-refresh-all-stale-msg");if(!Av(e)){var f=new dx(e,.1,Gkf,Hkf,Ikf);N(e,!0);f.play()}e=d.ea;e.R.Na(!1);e.D.C.Na(!1)}dlf(d);Fkf(d.ea.R)});this.La.listen(mK,"show-db-objects-refresh-sidepane",this.F)}t(clf,ZU);clf.prototype.Lf=function(){return zlb};
clf.prototype.Co=function(){return Alb};function dlf(a){var b=Xjf(a.C),c=a.ea;0==b.length?$jf(c.D):(Dkf(c.R),a9d(c.D),Zjf(a.C,b,function(d){a.isDisposed()||c.isDisposed()||blf(c,d)},function(d){if(!a.isDisposed()&&!c.isDisposed()){d=new rBd(d[0].rq(),d[0].Vh());Ekf(c.R);var e=c.D;e.Db()&&(e=e.F,e.F=d,X8d(e),N(e.Fa("waffle-dbobject-estimated-bytes-error"),!0),e.C.setActive(!1))}}))}
clf.prototype.F=function(){var a=this.ea;E(a.R);a.R=new wkf(a.Aa,a.qa());a.Ga(a.R);a.R.render(a.Fa("waffle-dataconnector-refresh-sidepane-refresh-widget"));a.D.refresh();a=this.ea;null!=a.F&&(E(a.F),a.F=new Rkf(a.H,a.qa()),a.Ga(a.F),a.F.render(a.Ma()));dlf(this);$U(this)};function elf(){eK.apply(this,arguments)}t(elf,eK);elf.prototype.C=function(){return clf};elf.prototype.D=function(){return alf};kK("dbrefresh",elf);
